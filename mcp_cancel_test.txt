============================= test session starts ==============================
platform darwin -- Python 3.10.19, pytest-7.4.4, pluggy-1.6.0
benchmark: 4.0.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/odgrim/dev/home/agentics/abathur/.abathur/worktrees/phase4-verification
configfile: pyproject.toml
plugins: repeat-0.9.4, anyio-4.11.0, xdist-3.8.0, cov-4.1.0, asyncio-0.21.2, benchmark-4.0.0
asyncio: mode=auto
collected 45 items / 40 deselected / 5 selected

tests/unit/mcp/test_task_queue_server.py .....                           [100%]

--------- coverage: platform darwin, python 3.10.19-final-0 ----------
Name                                               Stmts   Miss   Cover   Missing
---------------------------------------------------------------------------------
src/abathur/__init__.py                                1      0 100.00%
src/abathur/__main__.py                                3      3   0.00%   3-6
src/abathur/application/__init__.py                   10     10   0.00%   3-20
src/abathur/application/agent_executor.py             84     84   0.00%   3-272
src/abathur/application/agent_pool.py                111    111   0.00%   3-222
src/abathur/application/claude_client.py             108    108   0.00%   3-392
src/abathur/application/loop_executor.py             174    174   0.00%   3-587
src/abathur/application/mcp_manager.py               172    172   0.00%   3-414
src/abathur/application/resource_monitor.py           95     95   0.00%   3-237
src/abathur/application/swarm_orchestrator.py        101    101   0.00%   3-333
src/abathur/application/task_coordinator.py           48     48   0.00%   3-188
src/abathur/application/template_manager.py          296    296   0.00%   3-618
src/abathur/cli/__init__.py                            2      2   0.00%   3-5
src/abathur/cli/main.py                             1095   1095   0.00%   3-2399
src/abathur/cli/utils.py                              21     21   0.00%   26-104
src/abathur/domain/__init__.py                         2      0 100.00%
src/abathur/domain/models.py                         118      8  93.22%   110-120
src/abathur/domain/ports/__init__.py                   0      0 100.00%
src/abathur/domain/ports/auth_provider.py             18     18   0.00%   3-85
src/abathur/infrastructure/__init__.py                 6      0 100.00%
src/abathur/infrastructure/api_key_auth.py            20     20   0.00%   3-86
src/abathur/infrastructure/claude_cli_auth.py         54     54   0.00%   3-201
src/abathur/infrastructure/config.py                 127     70  44.88%   104-105, 120-146, 150-151, 155-161, 166-188, 205-225, 238-248, 252-254, 258-260
src/abathur/infrastructure/database.py               922    794  13.88%   56, 66, 70, 123-141, 147-159, 165-168, 186-221, 277-282, 325, 329, 341-346, 350-371, 379-382, 392-407, 415-418, 430-433, 441-446, 454-1128, 1133-1139, 1144-1228, 1248-1263, 1272-1398, 1420-1613, 1624-1669, 1675-1692, 1700-1705, 1709-1717, 1741-1778, 1782-1801, 1809-1821, 1832-1889, 1927, 1940-1953, 1973-1991, 2022-2039, 2062-2158, 2186-2261, 2272-2278, 2292-2298, 2312-2318, 2351-2411, 2446-2508, 2550-2671, 2689-2721, 2747-2759, 2791-2906, 2943-2986, 2991-2993, 3041-3058, 3062-3072, 3076-3085, 3089, 3101-3122, 3126-3137, 3142-3154, 3158-3166, 3178-3193, 3203-3207, 3239-3253, 3280-3319, 3339-3340, 3349-3353, 3362-3366
src/abathur/infrastructure/database_validator.py     201    187   6.97%   14-15, 34-65, 69-120, 124-141, 145-162, 166-209, 213-250, 254-296, 302-365
src/abathur/infrastructure/exceptions.py              20     20   0.00%   4-83
src/abathur/infrastructure/logger.py                  25     16  36.00%   20-85
src/abathur/infrastructure/mcp_config.py              60     42  30.00%   32, 48-62, 73-106, 117-133, 145-155
src/abathur/mcp/__init__.py                            2      2   0.00%   3-5
src/abathur/mcp/memory_server.py                      90     90   0.00%   3-456
src/abathur/mcp/server_manager.py                     56     56   0.00%   3-123
src/abathur/mcp/task_queue_server.py                 298    298   0.00%   3-881
src/abathur/mcp/task_queue_server_manager.py         123    123   0.00%   3-261
src/abathur/services/__init__.py                       7      0 100.00%
src/abathur/services/dependency_resolver.py          177    155  12.43%   53-59, 85-159, 178-203, 224-276, 291-295, 309-324, 340-351, 362-368, 384-428, 436-439, 450-459, 474-494
src/abathur/services/document_index_service.py       159    139  12.58%   23, 57-88, 107-121, 136-149, 160-171, 182-196, 208-232, 244-260, 276-295, 310-329, 361-397, 421-458, 485-498, 522-542, 556-574
src/abathur/services/embedding_service.py             32     32   0.00%   3-99
src/abathur/services/memory_service.py               108     95  12.04%   23, 63-116, 136-167, 201-248, 268-299, 323-355, 367-376, 396-415, 430-448
src/abathur/services/priority_calculator.py          102     87  14.71%   80-96, 125-167, 190-215, 238-244, 274-306, 332-347, 367-377
src/abathur/services/session_service.py              102     89  12.75%   25, 56-73, 90-103, 118-144, 182-216, 231-258, 266, 282-286, 299-323
src/abathur/services/task_queue_service.py           266    234  12.03%   110-114, 119, 173-354, 380-420, 447-528, 555-608, 632-677, 706-795, 821-853, 866-877, 888-899, 912-941, 952-966, 978-983
src/abathur/tui/__init__.py                            0      0 100.00%
src/abathur/tui/app.py                                76     76   0.00%   6-275
src/abathur/tui/exceptions.py                         27     27   0.00%   14-181
src/abathur/tui/models.py                             90     90   0.00%   7-260
src/abathur/tui/rendering/__init__.py                  2      2   0.00%   3-9
src/abathur/tui/rendering/tree_renderer.py            89     89   0.00%   7-330
src/abathur/tui/screens/__init__.py                    2      2   0.00%   3-5
src/abathur/tui/screens/filter_screen.py              93     93   0.00%   11-273
src/abathur/tui/screens/main_screen.py                15     15   0.00%   7-59
src/abathur/tui/services/__init__.py                   0      0 100.00%
src/abathur/tui/services/task_data_service.py         16     16   0.00%   8-92
src/abathur/tui/view_modes/__init__.py                 0      0 100.00%
src/abathur/tui/widgets/__init__.py                    4      4   0.00%   3-7
src/abathur/tui/widgets/stats_header.py               55     55   0.00%   9-197
src/abathur/tui/widgets/task_detail.py               161    161   0.00%   12-499
src/abathur/tui/widgets/task_tree.py                 168    168   0.00%   11-420
---------------------------------------------------------------------------------
TOTAL                                               6214   5747   7.52%
Coverage HTML written to dir htmlcov


======================= 5 passed, 40 deselected in 1.32s =======================
