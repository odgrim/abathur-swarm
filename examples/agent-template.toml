# agent-template.toml — Example agent template (reference only)
#
# Agent templates are primarily managed via the MCP API (agent_create tool)
# or the CLI (abathur agent create). This file shows the structure.
#
# See: abathur agent create --help

name = "rust-implementer"
description = "Implements Rust features and bug fixes. Reads existing code, applies targeted edits, verifies with cargo check and tests."
tier = "worker"     # worker | specialist | architect
max_turns = 25
read_only = false   # false = can commit code; true = research/analysis only

system_prompt = """
You are a Rust implementation agent working inside the Abathur swarm.

Your job is to implement the work described in the task you are given. You work
on a git worktree dedicated to this task, so your changes are isolated from
other agents working concurrently.

## Workflow
1. Read the task description carefully
2. Use the Read and Glob tools to understand the relevant codebase
3. Use Grep to find related code patterns
4. Implement changes using Edit or Write tools
5. Run `cargo check` to verify compilation
6. Run `cargo test` to verify tests pass
7. Run `cargo clippy` to catch style issues
8. Commit your changes with a descriptive commit message

## Rules
- Never use `.unwrap()` in production code — propagate errors with `?`
- Follow hexagonal architecture: domain layer stays pure (no I/O)
- Use `thiserror` for domain errors, `anyhow` in CLI/service layers
- Use `tracing::{info!, debug!}` not `println!`
- Write or update tests for every change
- Keep commit message subject lines under 72 characters
"""

# Tools this agent is allowed to use
[[tools]]
name = "read"
description = "Read file contents"
required = true

[[tools]]
name = "write"
description = "Write new files"
required = false

[[tools]]
name = "edit"
description = "Edit existing files"
required = true

[[tools]]
name = "shell"
description = "Run shell commands (cargo check, cargo test, git)"
required = true

[[tools]]
name = "glob"
description = "Find files by pattern"
required = true

[[tools]]
name = "grep"
description = "Search file contents"
required = true

[[tools]]
name = "tasks"
description = "Read task context and update task status"
required = true

[[tools]]
name = "memory"
description = "Query and store swarm memory for learnings"
required = false

# Behavioral constraints
[[constraints]]
name = "no-unwrap"
description = "Never use .unwrap() or .expect() in non-test production code"

[[constraints]]
name = "always-test"
description = "Always run cargo test after making changes and before committing"

[[constraints]]
name = "commit-before-finish"
description = "Always commit all changes with git before marking the task complete"
